# Compiler and flags
CC = g++
CFLAGS = -Iinclude -std=c++17

# Source and object files
SOURCES = src/DeviceFactory.cpp src/SmartHomeHub.cpp src/DeviceGroup.cpp src/Adapter.cpp src/Observer.cpp src/Command.cpp src/main.cpp
OBJECTS = $(SOURCES:.cpp=.o)
EXECUTABLE = smart_home.exe

# Default target
all: build

# Build target
build: $(OBJECTS)
	$(CC) $(OBJECTS) -o $(EXECUTABLE)

# Object file generation
%.o: %.cpp
	$(CC) $(CFLAGS) -c $< -o $@

# Run target (depends on build)
run: build
	.\$(EXECUTABLE)

# Clean (optional, but included for convenience)
clean:
	rm -f $(OBJECTS) $(EXECUTABLE)